# –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å—á–µ—Ç–∞ —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–∏–π - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å—á–µ—Ç–∞ —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSockets
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á–µ—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–±—ã—Ç–∏–π –∫–ª—É–±–∞
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ +1/-1
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∏ –ø–∞—Ä–Ω—ã—Ö –∏–≥—Ä

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–£–ñ–ï –°–î–ï–õ–ê–ù–û)
```powershell
cd c:\source\tennis\tennis\tennis
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

**–í–ê–ñ–ù–û:** –£ –≤–∞—Å `DEBUG=False` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º settings.py, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `settings_dev.py` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ bat-—Ñ–∞–π–ª (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)**
```powershell
cd c:\source\tennis\tennis
.\run_dev.bat
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ PowerShell**
```powershell
cd c:\source\tennis\tennis\tennis
$env:DJANGO_SETTINGS_MODULE = "tennis.settings_dev"
python manage.py runserver
```

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ß–µ—Ä–µ–∑ Daphne –Ω–∞–ø—Ä—è–º—É—é**
```powershell
cd c:\source\tennis\tennis\tennis
$env:DJANGO_SETTINGS_MODULE = "tennis.settings_dev"
daphne -b 0.0.0.0 -p 8000 tennis.asgi:application
```

**–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫–∞ –±–µ–∑ settings_dev.py?**
- –í `settings.py` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `DEBUG=False`
- –ü—Ä–∏ `DEBUG=False` Django –Ω–µ –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `settings_dev.py` –≤–∫–ª—é—á–∞–µ—Ç `WHITENOISE_USE_FINDERS = True`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É –±–µ–∑ `collectstatic`
- –í Docker —Å—Ç–∞—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `collectstatic` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/club/<id>/` (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–ª—É–±–∞)
2. –í –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ –∏–ª–∏ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç—É –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –ù–∞–∂–º–∏—Ç–µ "‚öîÔ∏è –¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è" ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ ‚Üí "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"
4. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–±—ã—Ç–∏–π –∫–ª—É–±–∞ –ø–æ—è–≤–∏—Ç—Å—è —Ä–∞–∑–¥–µ–ª "üî¥ –ò–¥–µ—Ç —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è"
5. –ù–∞–∂–∏–º–∞–π—Ç–µ +1/-1 –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ, –∫–∞–∫ —Å—á–µ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `tennis/apps/tennis_app/consumers.py` - WebSocket consumer
- `tennis/apps/tennis_app/routing.py` - WebSocket routing
- `WEBSOCKET_SETUP.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω—ã channels, daphne
- `tennis/settings.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Channels
- `tennis/asgi.py` - ASGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `staticfiles/js/friend_play.js` - WebSocket –∫–ª–∏–µ–Ω—Ç
- `templates/play_game.html` - –¥–æ–±–∞–≤–ª–µ–Ω club_id
- `templates/club_detail.html` - —Ä–∞–∑–¥–µ–ª —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ + WebSocket –∫–ª–∏–µ–Ω—Ç

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ò–≥—Ä–æ–∫ (friend_play.js)
    ‚Üì ws://host/ws/friendly_game/{club_id}/
FriendlyGameConsumer
    ‚Üì Channel Layer (broadcast to group)
–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ (club_detail.html)
    ‚Üì –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
python -c "import channels, daphne; print('OK')"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python manage.py migrate

# –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
python manage.py collectstatic --noinput
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Daphne –∏–ª–∏ ASGI-—Å–µ—Ä–≤–µ—Ä

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—á–µ—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ channels
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `pip install channels==4.0.0 daphne==4.1.0`

## –î–ª—è production

–î–ª—è production –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –≤–º–µ—Å—Ç–æ InMemoryChannelLayer
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å supervisor –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Daphne –ø—Ä–æ—Ü–µ—Å—Å–æ–º

–°–º. –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `WEBSOCKET_SETUP.md`
