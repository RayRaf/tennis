# Теннисное приложение - Обновление логики матчей

## Исправления и улучшения

### Основные изменения:

1. **Правильная логика матчей до 2 победных партий**
   - Матч теперь ведется до первых 2 выигранных партий (сетов)
   - Каждая партия играется до 11 очков с разницей минимум в 2 очка
   - После завершения каждой партии автоматически начисляется сет победителю

2. **Новый интерфейс live-матчей**
   - Отдельная страница для проведения матчей в реальном времени
   - Отображение текущего счета по партиям (сетам)
   - Показ текущего счета в активной партии
   - Информация о том, кто подает
   - История завершенных партий

3. **Функциональность управления матчем**
   - Кнопки "+1" для добавления очков каждому игроку
   - Кнопки "-1" для отката последнего очка (если нужно исправить ошибку)
   - Автоматическое завершение партии при достижении 11 очков с разницей ≥2
   - Автоматическое завершение матча при достижении 2 выигранных партий

4. **Улучшенное отображение турниров**
   - Обновленный дизайн страницы турнира
   - Четкое отображение статуса матчей (не начат, в процессе, завершен)
   - Удобные кнопки для начала live-матчей

## Как использовать:

### Проведение матча:
1. Зайдите в турнир
2. Найдите нужный матч в списке
3. Нажмите кнопку "Начать матч"
4. Начните первую партию кнопкой "Начать партию"
5. Используйте кнопки "+1" для начисления очков
6. При ошибке используйте кнопки "-1" для отката
7. Партия автоматически завершится при счете 11+ с разницей ≥2
8. Продолжайте играть следующие партии до победы одного из игроков (2 партии)

### Модель данных:
- **Match**: содержит информацию о матче, счет по партиям (`sets_player1`, `sets_player2`), статус завершения (`finished`)
- **Game**: представляет одну партию в матче, содержит время начала/окончания и счет по очкам
- **Point**: отдельное очко в партии с информацией о том, кто его набрал

### Техническая информация:
- Использует Django framework
- Данные сохраняются в реальном времени
- Автоматический пересчет турнирных таблиц
- Поддержка как круговых турниров, так и олимпийской системы

## Файлы с изменениями:

1. `models.py` - обновлены методы в моделях Match и Game
2. `views.py` - переработана логика `play_match_live`
3. `play_match_live.html` - новый шаблон для live-матчей
4. `tournament_detail.html` - улучшенное отображение матчей

## Особенности:

- **Автосохранение**: все действия сохраняются немедленно
- **Защита от ошибок**: возможность отката последнего очка
- **Информативность**: показ текущей подачи и истории партий
- **Удобный интерфейс**: интуитивно понятные кнопки управления

Система теперь полностью соответствует правилам настольного тенниса для матчей до 2 победных партий.
