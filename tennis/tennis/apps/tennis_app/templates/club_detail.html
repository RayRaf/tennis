{% extends 'base.html' %}
{% block title %}{{ club.name }} ‚Äî –ö–ª—É–±{% endblock %}
{% block content %}
  <h1>üèõÔ∏è {{ club.name }}</h1>
  <div class="content">
    <h2>üìÖ –°–æ–±—ã—Ç–∏—è –∫–ª—É–±–∞</h2>
    <div class="participants-list">
      <ul>
        {% for event in events %}
          <li>
            <span>{{ event.title }}</span>
            <span class="seed-badge">{{ event.date|date:"d.m.Y H:i" }}</span>
          </li>
        {% empty %}
          <li>–ù–µ—Ç —Å–æ–±—ã—Ç–∏–π</li>
        {% endfor %}
      </ul>
    </div>
    {% if is_club_admin %}
      <a class="btn success" href="{% url 'tennis_app:add_event' club.id %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</a>
    {% endif %}

    <h2>üèÜ –¢—É—Ä–Ω–∏—Ä—ã –∫–ª—É–±–∞</h2>
    <div class="participants-list">
      <ul>
        {% for tournament in tournaments %}
          <li>
            <a href="{% url 'tennis_app:tournament_detail' tournament.id %}" style="text-decoration: none; color: inherit;">
              <span>{{ tournament.name }}</span>
            </a>
            <div style="display: flex; gap: 0.5rem; align-items: center;">
              <span class="seed-badge">{{ tournament.start_date }}</span>
              <span class="match-round">{{ tournament.get_tournament_type_display }}</span>
            </div>
          </li>
        {% empty %}
          <li>–ù–µ—Ç —Ç—É—Ä–Ω–∏—Ä–æ–≤</li>
        {% endfor %}
      </ul>
    </div>
    {% if is_club_admin %}
      <a class="btn success" href="{% url 'tennis_app:add_tournament' club.id %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä</a>
    {% endif %}

    <h2>üë• –ò–≥—Ä–æ–∫–∏ –∫–ª—É–±–∞</h2>
    <div class="tournament-table-wrapper" style="margin-bottom: 1.5rem;">
      <table class="tournament-table sortable-table">
        <thead>
          <tr>
            <th data-type="text">–ò–≥—Ä–æ–∫</th>
            <th data-type="number">–†–µ–π—Ç–∏–Ω–≥</th>
            <th data-type="number">–ü–æ–±–µ–¥</th>
            <th data-type="number">–ò–≥—Ä</th>
            <th data-type="number">% –ø–æ–±–µ–¥</th>
          </tr>
        </thead>
        <tbody>
          {% for player in players %}
            <tr>
              <td><strong><a href="{% url 'tennis_app:player_detail' player.id %}" style="text-decoration:none; color:inherit;">{{ player.full_name }}</a></strong></td>
              <td>{{ player.rating }}</td>
              <td>{{ player.stats.wins }}</td>
              <td>{{ player.stats.total_games }}</td>
              <td>{{ player.stats.win_percent }}%</td>
            </tr>
          {% empty %}
            <tr><td colspan="5" style="text-align: center; color: var(--text-muted);">–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% if is_club_admin %}
      <a class="btn success" href="{% url 'tennis_app:add_player' club.id %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</a>
    {% endif %}

    <div style="margin: 2rem 0; height: 2px; background: linear-gradient(90deg, transparent, var(--primary-gradient), transparent); border-radius: 1px;"></div>

    <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; align-items: center;">
      {% if is_club_admin %}
        <a class="btn primary" href="{% url 'tennis_app:friend_play' %}?club_id={{ club.id }}">‚öîÔ∏è –¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∞—è –ø–∞—Ä—Ç–∏—è</a>
        <a class="btn secondary" href="{% url 'tennis_app:invite_admin' club.id %}">üìß –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
      {% endif %}
      {% if user.is_authenticated %}
        <a class="btn warning" href="{% url 'tennis_app:accept_invite' %}">üì¨ –ü—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</a>
      {% endif %}
      <span class="admin-status-badge {% if is_club_admin %}admin-status--yes{% else %}admin-status--no{% endif %}">
        {% if is_club_admin %}–í—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª—É–±–∞{% else %}–í—ã –Ω–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª—É–±–∞{% endif %}
      </span>
    </div>
  </div>
{% endblock %}

